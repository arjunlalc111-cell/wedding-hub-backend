<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Wedding Hub | Find Verified Wedding Vendors</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <style>
  /* Loader CSS */
  #mainLoader {
    position: fixed; left: 0; top: 0; right: 0; bottom: 0;
    background: rgba(255,255,255,0.70); z-index: 2300;
    display: flex; justify-content: center; align-items: center;
    transition: opacity .18s; visibility: hidden; opacity: 0;
  }
  #mainLoader.active { visibility: visible; opacity: 1; }
  .loader-spinner {
    width:44px;height:44px; border-radius:50%; border:6px solid #f3f3f3; border-top:6px solid #e11d48;
    animation: spin 1s linear infinite;
  }
  @keyframes spin { 100% { transform: rotate(360deg); } }
  </style>
</head>
<body>

<!-- Loader Spinner (always present on page!) -->
<div id="mainLoader">
  <div class="loader-spinner"></div>
</div>
<script>
function showLoader() { document.getElementById('mainLoader').classList.add('active'); }
function hideLoader() { document.getElementById('mainLoader').classList.remove('active'); }
</script>

<header class="navbar">
  <div style="display:flex;align-items:center;gap:16px;">
    <div class="logo">Wedding Hub</div>
    <nav class="nav-links">
      <a href="#services">Services</a>
      <a href="vendors.html">Vendors</a>
    </nav>
  </div>
  <div style="display:flex;align-items:center;gap:12px;">
    <div class="lang-switch" aria-hidden="true">
      <button class="lang-btn" data-lang="en">EN</button>
      <button class="lang-btn" data-lang="hi">HI</button>
      <button class="lang-btn" data-lang="hinglish">HING</button>
      <button class="lang-btn" data-lang="gujarati">GU</button>
      <button class="lang-btn" data-lang="marathi">MR</button>
      <button class="lang-btn" data-lang="rajasthani">RJ</button>
    </div>
    <div id="authArea">
      <a id="vendorRegisterLink" href="vendor-register.html" class="auth-link">Vendor Register</a>
      <a id="vendorLoginLink" href="vendor-login.html" class="auth-link">Vendor Login</a>
      <span id="vendorWelcome" style="display:none"></span>
      <button id="vendorLogoutBtn" style="display:none">Logout</button>
    </div>
  </div>
</header>

<!-- HERO slider (kept as is, no search bar inside hero anymore) -->
<section class="hero" id="home" aria-label="Hero">
  <div class="hero-overlay" style="padding:36px 16px;">
    <h1 class="rose-gold" data-i18n="hero_title">Your Dream Wedding Starts Here</h1>
    <p data-i18n="hero_subtitle">Find the right vendors, hassle-free</p>
  </div>

  <!-- slider placed in hero area so it fills the hero -->
  <div id="hero-slider-wrap">
    <div id="slider" aria-roledescription="carousel"></div>
    <div id="sliderThumbs" aria-hidden="false"></div>
    <button id="prevSlide" aria-label="Previous" class="slider-nav">â€¹</button>
    <button id="nextSlide" aria-label="Next" class="slider-nav">â€º</button>
  </div>
</section>

<!-- Search bar & coupon/report/review just below HERO, above Services -->
<section style="padding:20px 0 0 0;max-width:850px;margin:0 auto;">
  <div class="search-bar" style="width:100%;max-width:850px;margin:0 auto 16px;display:flex;gap:12px;">
    <input id="searchService" placeholder="Search Service (DJ, Caterer, Photographer...)" />
    <div style="position:relative;flex:1;">
      <input id="searchLocation" placeholder="City or Location" autocomplete="off" />
      <div id="suggestions" class="autocomplete-suggestions" style="display:none;"></div>
    </div>
    <button id="searchByServiceBtn" type="button">Search by Service</button>
    <button id="searchByLocationBtn" type="button">Search by Location</button>
  </div>

  <!-- Coupon | Report | Review grouping -->
  <div style="background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.04);padding:14px 14px 10px;max-width:850px;margin:0 auto;">
    <input id="couponCode" placeholder="Enter Coupon Code"/>
    <button onclick="applyCoupon(document.getElementById('couponCode').value)">Apply</button>
    <span id="discountValue"></span>
    <button onclick="reportVendor('VENDOR_ID', prompt('Report Reason?'))"
      style="margin-left:10px;">Report Vendor</button>
    <div id="reviewSection" style="margin-top:13px;">
      <form id="reviewForm" style="display:flex;gap:10px;">
        <select id="rating" style="width:60px;">
          <option>5</option><option>4</option><option>3</option><option>2</option><option>1</option>
        </select>
        <textarea id="comment" placeholder="Write your review"
          style="flex:1;padding:6px 8px;border-radius:4px;border:1px solid #eee;"></textarea>
        <button type="submit" style="min-width:80px;">Submit</button>
      </form>
      <div id="reviews" style="margin-top:8px;"></div>
    </div>
  </div>
</section>

<!-- SERVICES section now comes below search area -->
<section id="services" style="padding:28px 20px;">
  <h2 data-i18n="services_heading">Wedding Services</h2>
  <p data-i18n="services_sub">Choose a service to find the best vendors</p>
  <div class="service-grid" style="margin-top:12px;">
    <div class="service-card" data-i18n="service_tent" data-service="Tent"> <div>â›º</div><span>Tent</span></div>
    <div class="service-card" data-i18n="service_dj" data-service="DJ"> <div>ğŸ§</div><span>DJ</span></div>
    <div class="service-card" data-i18n="service_caterers" data-service="Caterers"> <div>ğŸ½ï¸</div><span>Caterers</span></div>
    <div class="service-card" data-i18n="service_photography" data-service="Photography"> <div>ğŸ“¸</div><span>Photography</span></div>
    <div class="service-card" data-i18n="service_makeup" data-service="Makeup"> <div>ğŸ’„</div><span>Makeup</span></div>
    <div class="service-card" data-i18n="service_pandit" data-service="Pandit"> <div>ğŸ”±</div><span>Pandit</span></div>
    <div class="service-card" data-i18n="service_dhol" data-service="Dhol"> <div>ğŸ¥</div><span>Dhol</span></div>
    <div class="service-card" data-i18n="service_band" data-service="Band"> <div>ğŸ·</div><span>Band</span></div>
    <div class="service-card" data-i18n="service_godi" data-service="Godi"> <div>ğŸ¤µ</div><span>Godi</span></div>
    <div class="service-card" data-i18n="service_luxcar" data-service="Luxury Car"> <div>ğŸš—</div><span>Luxury Car</span></div>
    <div class="service-card" data-i18n="service_banquet" data-service="Banquet"> <div>ğŸ›ï¸</div><span>Banquet</span></div>
    <div class="service-card" data-i18n="service_ledwall" data-service="LED Wall"> <div>ğŸ–¥ï¸</div><span>LED Wall</span></div>
    <div class="service-card" data-i18n="service_home_deco" data-service="Home Decoration"> <div>ğŸ¡</div><span>Home Deco</span></div>
    <div class="service-card" data-i18n="service_entry" data-service="Entry"> <div>ğŸ‰</div><span>Entry</span></div>
    <div class="service-card" data-i18n="service_mehndi" data-service="Mehndi"> <div>ğŸ¨</div><span>Mehndi</span></div>
    <div class="service-card" data-i18n="service_light_deco" data-service="Lighting"> <div>ğŸ’¡</div><span>Lighting</span></div>
    <div class="service-card" data-i18n="service_flower_deco" data-service="Flower Decoration"> <div>ğŸŒº</div><span>Flower Deco</span></div>
  </div>
</section>

<!-- VENDORS (list preview, unchanged) -->
<section id="vendors" class="vendors" style="padding:20px;">
  <h2 data-i18n="find_vendors">Find Vendors</h2>
  <div style="max-width:1100px;margin:12px auto 0;">
    <div style="display:flex;gap:12px;flex-wrap:wrap;margin-bottom:12px;">
      <div class="chip" id="filterServiceChip">Service: â€”</div>
      <div class="chip" id="filterCityChip">City: â€”</div>
      <div class="chip" id="filterRadiusChip">Radius: â€”</div>
      <button id="clearFilters" class="btn btn-outline">Clear Filters</button>
    </div>
    <div id="vendorGrid" class="vendor-grid"></div>
    <div id="noResults" class="empty-text" style="display:none;margin-top:18px;">No vendors found.</div>
  </div>
</section>

<footer>
  <div style="display:flex;justify-content:space-between;flex-wrap:wrap;gap:16px;">
    <div style="max-width:420px;">
      <h3>ğŸ’ Wedding Hub</h3>
      <p data-i18n="footer_tagline">à¤¶à¤¾à¤¦à¥€ à¤¸à¥‡ à¤œà¥à¤¡à¤¼à¥€ à¤¹à¤° à¤¸à¥‡à¤µà¤¾ â€“ à¤à¤• à¤¹à¥€ à¤ªà¥à¤²à¥‡à¤Ÿà¤«à¥‰à¤°à¥à¤® à¤ªà¤°</p>
    </div>
    <div>
      <h4 data-i18n="follow_us">Follow us on</h4>
      <div class="social-icons">
        <a href="#" aria-label="Instagram">Instagram</a> |
        <a href="#" aria-label="Facebook">Facebook</a> |
        <a href="#" aria-label="YouTube">YouTube</a> |
        <a href="#" aria-label="WhatsApp">WhatsApp</a> |
        <a href="#" aria-label="Telegram">Telegram</a>
      </div>
    </div>
    <div style="max-width:360px;">
      <h4 data-i18n="about_heading">About Wedding Hub</h4>
      <p id="aboutText">Wedding Hub connects you to trusted, verified and experienced wedding service providers to make your wedding memorable and stress-free.</p>
    </div>
  </div>
  <div style="text-align:center;margin-top:18px;color:#9ca3af;">Â© 2026 Wedding Hub. All Rights Reserved.</div>
  <div style="text-align:center;margin:10px 0 0 0;">
    <a href="privacy.html">Privacy Policy</a> |
    <a href="terms.html">Terms & Conditions</a> |
    <a href="refund.html">Refund Policy</a>
  </div>
</footer>

<!-- floating WhatsApp -->
<a id="whatsappFloat" href="#" target="_blank" aria-label="WhatsApp">
  <img src="images/whatsapp-icon.svg" alt="WhatsApp" />
</a>

<script src="env.js"></script>
<script src="lang.js"></script>

<!-- Offer/Review/Report functionality -->
<script>
function applyCoupon(code) {
  if (!code) { document.getElementById('discountValue').innerText = "Please enter code"; return; }
  showLoader();
  setTimeout(() => {
    // Fake example
    if (code === "FIRST50") document.getElementById('discountValue').innerText = "50% Discount Applied!";
    else document.getElementById('discountValue').innerText = "Invalid Coupon";
    hideLoader();
  }, 900);
}
function reportVendor(vendorId, reason) {
  if (!reason) return;
  showLoader();
  setTimeout(() => {
    alert("Report submitted for vendor " + vendorId + "\nReason: " + reason);
    hideLoader();
  }, 900);
}
document.getElementById('reviewForm').onsubmit = async (e) => {
  e.preventDefault();
  showLoader();
  try {
    await fetch('/api/reviews', { method:'POST',
      headers:{'Content-Type':'application/json'},
      body:JSON.stringify({
        vendor: "VENDOR_ID", // TODO: Replace with real vendorId from context.
        user: localStorage.getItem('username')||'Anon',
        rating: document.getElementById('rating').value,
        comment: document.getElementById('comment').value
    })});
    alert('Review submitted!');
    loadReviews();
  } finally { hideLoader(); }
};
async function loadReviews() {
  showLoader();
  try {
    const res = await fetch('/api/reviews/'+"VENDOR_ID"); // TODO: Replace with real vendorId
    const r = await res.json();
    document.getElementById('reviews').innerHTML = r.map(
      x=>`<b>${x.rating}â˜…</b> ${x.comment}`
    ).join('<br>');
  } finally { hideLoader(); }
}
loadReviews();
</script>

<script>
/* ===== Your original slider, autocomplete, vendors JS here. Just ensure loaders for async. ===== */
// ...keep your previous scripts...
</script>

</body>
</html>